(function(c){var h={init:function(a,h){var f=this,b=c.extend(a,h);b.init(b);b.bind({contextmenu:function(a){if(!a.ctrlKey||!b.ctrl){a.preventDefault();f.start(b);c("#contextmenu").remove();var g=c(document.createElement("div")).attr({id:"contextmenu","class":b.style}).css({position:"absolute",display:"none","z-index":"10000"});c(document.body).append(g);for(var d in b.menu){var e=c(document.createElement("a"));"function"===typeof b.menu[d].callback?e.click(b.menu[d].callback):e.attr({href:b.menu[d].callback});
e.attr({id:b.menu[d].id,"class":b.menu[d]["class"]});e.html(b.menu[d].title).appendTo(g)}d=c(document).width();var e=c(document).height(),h=g.outerWidth(),i=g.outerHeight();g.css({display:"block",top:a.pageY>e-i?e:a.pageY,left:a.pageX>d-h?d:a.pageX})}}});c(document).click(function(){f.finish(b)}).keydown(function(a){27===a.keyCode&&f.finish(b)}).scroll(function(){f.finish(b)}).resize(function(){f.finish(b)})},start:function(a){a.start(a)},finish:function(a){a.finish(a);c("#contextmenu").remove()},
error:function(a){a.error(a)}};c.fn.contextmenu=function(a){a=c.extend({init:function(){},start:function(){},finish:function(){},error:function(){},ctrl:1,style:"",menu:[]},a);this.each(function(){h.init(c(this),a)})}})(jQuery);
