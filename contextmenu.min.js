(function(c){var f={init:function(a,f){var g=this,b=c.extend(a,f);b.init(b);b.bind({contextmenu:function(a){if(!a.ctrlKey||!b.ctrl){a.preventDefault();g.start(b);c("#contextmenu").remove();var h=c(document.createElement("div")).attr({id:"contextmenu","class":b.style}).css({position:"absolute",display:"none","z-index":"10000"});c(document.body).append(h);for(var d in b.menu){var e=c(document.createElement("a"));"function"===typeof b.menu[d].callback?e.click(b.menu[d].callback):e.attr({href:b.menu[d].callback});
e.attr({id:b.menu[d].id,"class":b.menu[d]["class"]});e.html(b.menu[d].title).appendTo(h)}d=c(document).width();var e=c(document).height(),f=h.outerWidth(),i=h.outerHeight();h.css({display:"block",top:a.pageY>e-i?e-i:a.pageY,left:a.pageX>d-f?d-f:a.pageX})}}});c(document).click(function(){g.finish(b)}).keydown(function(a){27===a.keyCode&&g.finish(b)}).scroll(function(){g.finish(b)}).resize(function(){g.finish(b)})},start:function(a){a.start(a)},finish:function(a){a.finish(a);c("#contextmenu").remove()},
error:function(a){a.error(a)}};c.fn.contextmenu=function(a){a=c.extend({init:function(){},start:function(){},finish:function(){},error:function(){},ctrl:1,style:"",menu:[]},a);this.each(function(){f.init(c(this),a)})}})(jQuery);
